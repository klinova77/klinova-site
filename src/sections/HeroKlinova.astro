---
import heroImg from '../assets/images/interieur-klinova.jpg';
---

<section
  id="hero"
  class="relative isolate flex min-h-[90vh] items-center overflow-hidden"
  aria-labelledby="hero-title"
>
  <!-- Image de fond + parallax doux -->
  <div id="hero-parallax" class="absolute inset-0 will-change-transform">
    <img
      src={heroImg.src}
      width={heroImg.width}
      height={heroImg.height}
      alt="Espace moderne lumineux illustrant la propreté Klinova"
      class="absolute inset-0 h-full w-full select-none object-cover object-center"
      loading="eager"
      decoding="async"
    />
    <!-- léger voile pour le contraste -->
    <div class="absolute inset-0 bg-white/12"></div>
  </div>

  <!-- Overlay dégradé animé – très discret -->
  <div class="absolute inset-0 pointer-events-none mix-blend-multiply kl-overlay"></div>

  <!-- Dégradé bas pour lisibilité selon image -->
  <div class="pointer-events-none absolute inset-x-0 bottom-0 h-40 bg-gradient-to-t from-white/70 to-transparent"></div>

  <!-- Contenu -->
  <div class="container-responsive relative z-10 py-16 md:py-24">
    <div class="max-w-2xl">
      <span
        class="inline-flex items-center gap-2 rounded-full border px-4 py-2 text-xs font-semibold tracking-wider uppercase backdrop-blur-[2px]"
        style="
          background: color-mix(in srgb, var(--color-action-500) 10%, rgba(255,255,255,.92));
          color: var(--color-action-600);
          border-color: color-mix(in srgb, var(--color-action-500) 35%, transparent);
        "
      >
        <span class="block h-2 w-2 rounded-full" style="background: var(--color-action-500)"></span>
        Excellence & fiabilité
      </span>

      <h1
        id="hero-title"
        class="mt-6 text-4xl font-bold leading-tight sm:text-5xl md:text-6xl"
        style="color: var(--color-primary-900)"
      >
        Nettoyage professionnel & durable
        <span class="block" style="color: var(--color-action-500)">en Île-de-France</span>
      </h1>

      <p class="mt-6 max-w-prose text-lg md:text-xl" style="color: var(--color-neutral-600)">
        <strong style="color: var(--color-primary-900)">La propreté sur mesure pour les plus exigeants.</strong>
        Interventions maîtrisées, équipements professionnels et démarche responsable pour des résultats impeccables.
      </p>

      <div class="mt-10 flex flex-wrap items-center gap-4">
        <a
          href="#expertises"
          class="inline-flex items-center gap-2 rounded-xl px-6 py-3 font-semibold text-white shadow-sm transition hover:shadow-lg"
          style="background: linear-gradient(135deg, var(--color-action-500) 0%, var(--color-action-600) 100%)"
        >
          Découvrir nos services
          <svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4-4 4M3 12h18" />
          </svg>
        </a>

        <a
          href="/contact"
          class="inline-flex items-center gap-2 rounded-xl border px-6 py-3 font-semibold transition"
          style="color: var(--color-action-600); border-color: color-mix(in srgb, var(--color-action-600) 35%, transparent)"
        >
          Contactez-nous
        </a>
      </div>

      <!-- Réassurance sobre -->
      <div class="mt-10 flex flex-wrap gap-x-6 gap-y-3 text-sm" style="color: var(--color-neutral-600)">
        <div class="flex items-center gap-2">
          <svg class="h-5 w-5 text-[var(--color-action-600)]" fill="currentColor" viewBox="0 0 20 20">
            <path d="M16.707 5.293a1 1 0 00-1.414 0L8 12.586 4.707 9.293a1 1 0 00-1.414 1.414l4 4a1 1 0 001.414 0l8-8a1 1 0 000-1.414z"/>
          </svg>
          Techniciens certifiés
        </div>
        <div class="flex items-center gap-2">
          <svg class="h-5 w-5 text-[var(--color-action-600)]" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10 2a8 8 0 100 16 8 8 0 000-16zM9 13l-3-3 1.414-1.414L9 10.172l3.586-3.586L14 8l-5 5z"/>
          </svg>
          Garantie résultats
        </div>
        <div class="flex items-center gap-2">
          <svg class="h-5 w-5 text-[var(--color-action-600)]" fill="currentColor" viewBox="0 0 20 20">
            <path d="M4 3a1 1 0 000 2h1l.4 2h9.2l.4-2H16a1 1 0 100-2H4zM3 7a1 1 0 011 1v9a2 2 0 002 2h8a2 2 0 002-2V8a1 1 0 112 0v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8a1 1 0 011-1z"/>
          </svg>
          Éco-responsable
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Overlay animé discret (zéro bling) */
  .kl-overlay{
    background:
      radial-gradient(120% 80% at 12% 0%,
        color-mix(in srgb, var(--color-action-500) 14%, transparent) 0%,
        transparent 60%)
      ,
      linear-gradient(120deg,
        color-mix(in srgb, var(--color-action-600) 8%, transparent),
        transparent 45%,
        color-mix(in srgb, var(--color-primary-900) 5%, transparent));
    background-size: 200% 200%, 200% 200%;
    animation: kl-shift 16s ease-in-out infinite alternate;
    opacity: .38;
  }
  @keyframes kl-shift {
    0%   { background-position: 0% 50%, 0% 50%; }
    100% { background-position: 100% 50%, 100% 50%; }
  }

  /* Réduction globale si l’utilisateur préfère moins d’animations */
  @media (prefers-reduced-motion: reduce){
    .kl-overlay{
      animation: none;
    }
  }
</style>

<script>
  // Parallax doux, amplitude limitée, RDM-friendly
  const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
  const el = document.getElementById('hero-parallax');

  if (el && !mq.matches) {
    let raf = null;
    const max = 16; // amplitude max en px
    const onScroll = () => {
      if (raf) return;
      raf = requestAnimationFrame(() => {
        const y = Math.min(max, Math.max(-max, window.scrollY * 0.05));
        el.style.transform = `translate3d(0, ${y}px, 0)`;
        raf = null;
      });
    };
    window.addEventListener('scroll', onScroll, { passive: true });
  }
</script>
